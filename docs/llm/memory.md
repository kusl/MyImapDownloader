Purpose & context
Kushal is developing and maintaining MyImapDownloader, a .NET 10 email archiving and search system designed to safely backup emails from multiple IMAP accounts. The system consists of two main components: MyImapDownloader for downloading emails from IMAP servers, and MyEmailSearch for indexing and searching the downloaded archives. Kushal manages multiple email accounts across different providers (mailo.com, disroot.org, gmx.com) and maintains a comprehensive backup workflow that downloads from all accounts into separate directories under ~/Documents/mail/. The archive has grown to over 35GB across multiple accounts, with potential to reach hundreds of gigabytes over time.
The project emphasizes safety-first design with read-only IMAP operations, data integrity through atomic write patterns, and comprehensive observability via OpenTelemetry instrumentation. Kushal prioritizes free and open source software dependencies, avoiding proprietary solutions, and maintains strict requirements around delivering complete, immediately actionable solutions rather than fragmented implementations.
Current state
Kushal is actively working through compilation and configuration issues in the MyEmailSearch component while the MyImapDownloader core functionality is stable and operational. Recent focus has been on resolving System.CommandLine API compatibility issues, fixing C# compilation errors related to missing methods and incorrect parameter handling, and ensuring proper CLI option configuration. The email downloading workflow is functioning correctly with delta synchronization and deduplication working as expected, evidenced by only SQLite database modifications rather than re-downloading existing emails.
The current archive spans eight different email accounts across three providers, with an extremely lightweight SQLite index (around 190KB) relative to the 35GB of email data, indicating efficient database design. Kushal maintains a regular workflow involving building, testing, running the email downloader, and committing results to git.
On the horizon
The immediate priority is completing the MyEmailSearch implementation to enable fast querying across the growing email archive. This includes finalizing the SQLite FTS5 full-text search capabilities, structured field searches, and modern CLI interface. Performance targets include sub-500ms response times for structured queries and sub-1-second response times for full-text searches on the current 35GB archive.
Future considerations include scaling the search system to handle hundreds of gigabytes of email data, implementing comprehensive indexing strategies for both metadata and content, and ensuring cross-platform compatibility. There's also ongoing attention to maintaining the lightweight, efficient architecture as the system grows.
Key learnings & principles
Kushal has established that safety-first design is paramount - the system operates with read-only IMAP guarantees, never deleting emails from either remote servers or local storage. Delta synchronization with UIDVALIDITY indexing provides robust deduplication while maintaining data integrity. The append-only local storage pattern with atomic writes ensures crash safety.
Experience has shown the importance of comprehensive error handling and resilience patterns, implemented through Polly for retry logic and circuit breakers. The SQLite-backed indexing approach has proven highly efficient, maintaining minimal overhead relative to the actual email data volume. Self-healing database recovery capabilities have emerged as crucial for long-term reliability.
Approach & patterns
Kushal follows a systematic approach to development that emphasizes complete, single-file shell scripts for implementations rather than fragmented instructions across multiple files. All code changes are validated against dump.txt as the authoritative source of truth before implementation. The development workflow includes comprehensive testing, build verification, and immediate validation of changes.
For dependency management, Kushal maintains strict FOSS-only requirements with rare exceptions only when no viable alternatives exist. GitHub Actions implementations prefer direct workflow logic over third-party marketplace actions, using only GitHub's primitive actions for core operations. The codebase emphasizes testable architecture with comprehensive observability through OpenTelemetry instrumentation.
Problem-solving follows a pattern of thorough analysis, complete solution delivery, and verification through build and test execution. Code reviews focus on security considerations, particularly around FTS5 injection vulnerabilities and proper error handling patterns.
Tools & resources
The system is built on .NET 10 with SQLite for local storage and indexing, using FTS5 virtual tables for full-text search capabilities. Key dependencies include System.CommandLine for CLI interfaces, MimeKit for email parsing, and Microsoft.Extensions for dependency injection. Testing utilizes TUnit framework with comprehensive coverage of core functionality.
Development tools include comprehensive bash scripting for automated fixes and implementations, XDG directory specifications for cross-platform path resolution, and OpenTelemetry for telemetry and observability. The project maintains central package management through Directory.Packages.props and shared build properties for multi-project coordination.
Version control follows a pattern of regular commits after successful email downloads, with careful attention to only committing database changes rather than re-downloaded content, confirming the effectiveness of the deduplication system.